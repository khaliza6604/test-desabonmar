<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Desa Bontomarannu - Infografis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />
    <!-- Google Fonts: Poppins for body, Montserrat for headings -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!-- D3.js library for charts -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        /* Apply Poppins font globally */
        body {
            font-family: 'Poppins', sans-serif;
            color: #333; /* Darker default text for better contrast */
            line-height: 1.6; /* Improved readability */
            overflow-x: hidden; /* Prevent horizontal scroll on animations */
            background-color: #F0F2F5; /* Consistent background with Canvas */
        }

        /* Apply Montserrat font for all headings */
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Montserrat', sans-serif;
        }

        /* Custom CSS for responsive navbar on small screens */
        @media (max-width: 767px) {
            #nav-menu {
                display: none; /* Hidden by default on mobile */
                position: absolute;
                top: 100%; /* Position below the header */
                left: 0;
                right: 0;
                background-color: #1a5276; /* Dark blue background for mobile menu */
                padding: 0; /* Removed padding from the menu container itself */
                z-index: 1000;
                border-radius: 0 0 0.75rem 0.75rem; /* Rounded bottom corners */
                box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3); /* Stronger shadow from Canvas */
                animation: slideDown 0.3s ease-out forwards; /* Slide down animation */
            }
            #nav-menu.active {
                display: block; /* Show when active */
            }
            #nav-menu ul {
                flex-direction: column; /* Stack items vertically */
                gap: 0.75rem; /* Spacing between menu items */
                padding: 1rem; /* Added horizontal padding to the ul to match general page padding */
            }
            #nav-menu ul li {
                width: 100%; /* Full width for each item */
            }
            #nav-menu ul li a {
                display: block;
                padding: 0.75rem 0; /* Removed horizontal padding here, as it's now on the ul */
                text-align: center;
                border-radius: 0.5rem; /* Rounded links */
                background-color: rgba(255, 255, 255, 0.05); /* Subtle background for mobile links */
                transition: background-color 0.2s ease;
            }
            #nav-menu ul li a:hover {
                background-color: rgba(255, 255, 255, 0.15);
            }
        }

        /* Keyframe animation for mobile menu */
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Active navigation link styling with underline effect (from Canvas) */
        .nav-link {
            transition: color 0.3s ease, background-color 0.3s ease;
            position: relative;
            padding-bottom: 8px; /* Space for the underline */
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0%;
            height: 3px;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            background-color: #3498db; /* Bright blue underline */
            border-radius: 2px;
            transition: width 0.3s ease-in-out;
        }
        .nav-link.active::after,
        .nav-link:hover::after {
            width: 70%; /* Wider underline on active/hover */
        }
        .nav-link.active {
            color: #3498db; /* Bright blue text when active */
            font-weight: 700;
        }

        /* Hover zoom effect for images */
        .hover-zoom:hover {
            transform: scale(1.05);
            transition: transform 0.3s ease-in-out;
        }

        /* Custom scroll effect for header (from Canvas) */
        .header-scrolled {
            background-image: linear-gradient(to right, rgba(26, 82, 118, 0.98), rgba(40, 116, 166, 0.98));
            backdrop-filter: blur(10px); /* Stronger blur effect */
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4); /* Stronger shadow when scrolled */
            padding-top: 0.75rem; /* Slightly reduced padding */
            padding-bottom: 0.75rem;
        }

        /* Custom scrollbar for modals (from Canvas) */
        .modal-content::-webkit-scrollbar {
            width: 8px;
        }

        .modal-content::-webkit-scrollbar-track {
            background: #e0e0e0; /* Lighter track */
            border-radius: 10px;
        }

        .modal-content::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }

        .modal-content::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* Tooltip for D3 charts */
        .tooltip {
            position: absolute;
            text-align: center;
            padding: 8px;
            font: 12px sans-serif;
            background: #333;
            color: #fff;
            border: 0px;
            border-radius: 8px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
        }

        /* Animation for fade-in effect */
        .animate-fade-in {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.8s ease-out forwards;
        }

        .animate-fade-in.delay-100 {
            animation-delay: 0.1s;
        }

        .animate-fade-in.delay-200 {
            animation-delay: 0.2s;
        }

        .animate-fade-in.delay-300 {
            animation-delay: 0.3s;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Card hover effect */
        .card-hover-effect {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover-effect:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        /* D3 legend styling */
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            cursor: pointer; /* Add cursor pointer to indicate interactivity */
            transition: transform 0.2s ease; /* Add transition for smooth hover effect */
        }
        .legend-item:hover {
            transform: scale(1.05); /* Zoom effect on hover */
        }
        .legend-color-box {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            margin-right: 8px;
            border: 1px solid rgba(255, 255, 255, 0.5); /* Subtle border for color boxes */
        }
        .legend-text {
            font-size: 14px;
            color: #555;
            font-weight: 500;
        }

        /* Custom header underline for sections */
        .section-title-underline {
            position: relative;
            padding-bottom: 0.5rem; /* Space for the underline */
        }
        .section-title-underline::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 4rem; /* Length of the underline */
            height: 0.25rem; /* Thickness of the underline */
            background-color: #2874A6; /* Blue color */
            border-radius: 9999px; /* Fully rounded ends */
        }

        /* Carousel navigation overlay - Adjusted to match image */
        .carousel-nav-overlay {
            position: absolute;
            top: 50%; /* Center vertically */
            transform: translateY(-50%); /* Adjust for vertical centering */
            width: 30px; /* Adjusted width to be rectangular */
            height: 50px; /* Adjusted height to be rectangular */
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem; /* Adjusted arrow size for minimalist icon */
            color: #333; /* Darker color for icon */
            background-color: white; /* Solid white background */
            border-radius: 8px; /* Rectangular shape with rounded corners */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Softer shadow */
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            user-select: none; /* Prevent text selection */
            z-index: 10; /* Ensure it's above the image */
        }

        .carousel-nav-overlay:hover {
            background-color: #f0f0f0; /* Slightly grey on hover */
            transform: translateY(-50%) scale(1.05); /* Slightly smaller zoom on hover */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); /* Slightly stronger shadow on hover */
        }

        .carousel-nav-overlay.left {
            left: 10px; /* Distance from left edge */
        }

        .carousel-nav-overlay.right {
            right: 10px; /* Distance from right edge */
        }

        /* Flexible grid for Sarana dan Prasarana sections */
        .flexible-grid {
            display: grid;
            /* Adjust min-width for cards as needed. This will make them at least 250px wide. */
            /* The 'auto-fit' keyword will create as many columns as can fit without overflow. */
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem; /* Corresponds to Tailwind's gap-4 */
        }

        /* Increased size for detail modal and carousel */
        #detailModal .modal-content {
            max-width: 768px; /* Increased from max-w-lg (640px) to max-w-2xl (768px) */
        }

        /* Responsive adjustments for D3 chart containers */
        .chart-section #pekerjaan-chart-container,
        .chart-section #pendidikan-chart-container {
            min-height: 300px; /* Ensure a minimum height on smaller screens */
        }

        @media (min-width: 768px) { /* md breakpoint */
            .chart-section #pekerjaan-chart-container,
            .chart-section #pendidikan-chart-container {
                min-height: 400px; /* Restore original height for larger screens */
            }
        }

        /* Styling for the list items in the modal */
        .modal-list-item {
            display: block;
            width: 100%;
            padding: 1rem;
            margin-bottom: 0.5rem;
            background-color: #EBF5FB; /* Light blue background */
            border-radius: 0.75rem; /* Rounded corners */
            text-align: center;
            font-size: 1.125rem; /* text-lg */
            font-weight: 600; /* font-semibold */
            color: #2874A6; /* Blue text */
            transition: background-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05); /* Subtle shadow */
        }

        .modal-list-item:hover {
            background-color: #D6EAF8; /* Lighter blue on hover */
            transform: translateY(-2px); /* Slight lift effect */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Slightly stronger shadow on hover */
        }

        /* Style for non-clickable list items */
        .modal-list-item-static {
            display: block;
            width: 100%;
            padding: 1rem;
            margin-bottom: 0.5rem;
            background-color: #EBF5FB;
            border-radius: 0.75rem;
            text-align: center;
            font-size: 1.125rem;
            font-weight: 600;
            color: #2874A6;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            /* No hover effects for static items */
        }

        /* Custom aspect ratio class for 16:9 */
        .aspect-w-16-9 {
            position: relative;
            padding-bottom: 56.25%; /* 9 / 16 * 100% */
        }
        .aspect-w-16-9 > * {
            position: absolute;
            height: 100%;
            width: 100%;
            top: 0;
            left: 0;
        }
    </style>
</head>
<body class="bg-[#F8F9FA] text-gray-800">
    <!-- Header Section -->
    <header class="fixed top-0 left-0 right-0 bg-gradient-to-r from-[#1A5276] to-[#2874A6] p-4 flex items-center z-50 shadow-lg transition-all duration-300 ease-in-out" id="main-header">
        <div class="container mx-auto flex items-center justify-between">
            <div class="flex items-center">
                <img
                    alt="Logo of Bulukumba"
                    class="h-16 w-16 mr-4 shadow-lg transform hover:rotate-6 transition-transform duration-300"
                    height="80"
                    src="images/logobulkum.png"
                    width="80"
                />
                <div>
                    <h1 class="text-white text-3xl font-extrabold tracking-wider">Desa Bontomarannu</h1>
                    <p class="text-white text-sm opacity-90">Kabupaten Bulukumba</p>
                </div>
            </div>
            <!-- Hamburger Icon for Mobile -->
            <button id="hamburger" class="md:hidden text-white text-3xl focus:outline-none p-2 rounded-md hover:bg-white hover:bg-opacity-20 transition-colors duration-200">
                <i class="fas fa-bars"></i>
            </button>
            <!-- Navigation Menu -->
            <nav id="nav-menu" class="ml-auto hidden md:block">
                <ul class="flex space-x-6 text-white">
                    <li class="group relative">
                        <a
                            class="relative z-10 font-semibold nav-link px-4 py-2 rounded-lg
                            group-hover:text-white transition-all duration-300"
                            href="index.html"
                        >
                            Beranda
                        </a>
                    </li>
                    <li class="group relative">
                        <a
                            class="relative z-10 font-semibold nav-link px-4 py-2 rounded-lg
                            group-hover:text-white transition-all duration-300"
                            href="profildesa.html"
                        >
                            Profil Desa
                        </a>
                    </li>
                    <li class="group relative">
                        <a
                            class="relative z-10 font-semibold nav-link px-4 py-2 rounded-lg
                            group-hover:text-white transition-all duration-300"
                            href="infografis.html"
                        >
                            Infografis
                        </a>
                    </li>
                    <li class="group relative">
                        <a
                            class="relative z-10 font-semibold nav-link px-4 py-2 rounded-lg 
                            group-hover:text-white transition-all duration-300"
                            href="umkm.html"
                        >
                            UMKM
                        </a>
                    </li>
                    <li class="group relative">
                        <a
                            class="relative z-10 font-semibold nav-link px-4 py-2 rounded-lg 
                            group-hover:text-white transition-all duration-300"
                            href="galeri.html"
                        >
                            Galeri
                        </a>
                    </li>
                    <li class="group relative">
                        <a
                            class="relative z-10 font-semibold nav-link px-4 py-2 rounded-lg 
                            group-hover:text-white transition-all duration-300"
                            href="about.html"
                        >
                            About
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="relative pt-24 md:pt-32"> <!-- Adjusted padding top for fixed header -->
        <div class="container mx-auto px-4 py-8 md:px-8 md:py-12 bg-white rounded-lg shadow-xl my-8">
            <div class="flex items-center mb-4">
                <div class="w-1.5 bg-[#2874A6] h-14 mr-4 rounded-full"></div>
                <div>
                    <h1 class="text-4xl font-bold text-gray-800 section-title-underline">Infografis</h1>
                    <h2 class="text-2xl text-gray-500 mt-2">Data Umum Desa Bontomarannu</h2>
                </div>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                <div class="bg-gray-100 p-5 rounded-xl shadow-lg border border-gray-200 flex items-center card-hover-effect animate-fade-in">
                    <i class="fas fa-users text-4xl text-[#2874A6] mr-4"></i>
                    <div>
                        <p class="text-gray-600">TOTAL PENDUDUK</p>
                        <p class="text-2xl font-bold text-[#2874A6]">1.783 Jiwa</p>
                    </div>
                </div>
                <div class="bg-gray-100 p-5 rounded-xl shadow-lg border border-gray-200 flex items-center card-hover-effect animate-fade-in delay-100">
                    <i class="fas fa-house-user text-4xl text-[#2874A6] mr-4"></i>
                    <div>
                        <p class="text-gray-600">KEPALA KELUARGA</p>
                        <p class="text-2xl font-bold text-[#2874A6]">572 KK</p>
                    </div>
                </div>
                <!-- Updated "Jumlah Dusun" card with detail button and slides -->
                <div class="bg-gray-100 p-5 rounded-xl shadow-lg border border-gray-200 flex items-center card-hover-effect cursor-pointer animate-fade-in delay-200" onclick="showCarouselDetail('Dusun', '', [
                    {url: 'images/tulekko.jpg', name: 'Dusun Tulekko', address: 'Desa Bontomarannu'},
                    {url: 'images/tunumbeng.JPG', name: 'Dusun Tunumbeng', address: 'Desa Bontomarannu'},
                    {url: 'images/batas_samakore.JPG', name: 'Dusun Samakore', address: 'Desa Bontomarannu'}
                ])">
                    <i class="fas fa-map-marked-alt text-4xl text-[#2874A6] mr-4"></i>
                    <div>
                        <p class="text-gray-600">JUMLAH DUSUN</p>
                        <p class="text-2xl font-bold text-[#2874A6]">3 Dusun</p>
                    </div>
                    <button class="ml-auto bg-[#2874A6] text-white px-3 py-1 rounded-md hover:bg-[#1A5276] transition-colors duration-200 text-sm font-semibold">Detail</button>
                </div>
                <div class="bg-gray-100 p-5 rounded-xl shadow-lg border border-gray-200 flex items-center card-hover-effect animate-fade-in delay-300">
                    <i class="fas fa-list-ol text-4xl text-[#2874A6] mr-4"></i>
                    <div>
                        <p class="text-gray-600">JUMLAH RK</p>
                        <p class="text-2xl font-bold text-[#2874A6]">12 RK</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="container mx-auto px-4 py-8 md:px-8 md:py-12 bg-white rounded-lg shadow-xl my-8">
            <div class="flex items-center mb-4">
                <div class="w-1.5 bg-[#2874A6] h-14 mr-4 rounded-full"></div>
                <div>
                    <h1 class="text-4xl font-bold text-gray-800 section-title-underline">Statistik Demografi Penduduk</h1>
                    <p class="text-lg text-gray-600 mt-2">Data pekerjaan dan jenis kelamin masyarakat Desa Bontomarannu.</p>
                </div>
            </div>

            <!-- Combined section for Pekerjaan and Pendidikan charts -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 bg-gradient-to-br from-blue-50 to-indigo-100 p-6 rounded-xl shadow-lg">
                <div class="chart-section animate-fade-in"> <!-- Added class for animation -->
                    <div class="flex items-center mb-4">
                        <div class="w-1.5 bg-[#2874A6] h-10 mr-4 rounded-full"></div> <!-- Smaller line for sub-section -->
                        <div>
                            <h2 class="text-3xl font-bold text-gray-700">Berdasarkan Pekerjaan</h2>
                        </div>
                    </div>
                    <div id="pekerjaan-chart-container" class="flex justify-center items-center w-full min-h-[300px] sm:min-h-[400px] bg-white p-4 rounded-lg shadow-md border border-gray-100 relative z-10">
                        <!-- D3.js chart will be rendered here -->
                    </div>
                </div>
                
                <div class="chart-section animate-fade-in delay-100"> <!-- Added class for animation with delay -->
                    <div class="flex items-center mb-4">
                        <div class="w-1.5 bg-[#2874A6] h-10 mr-4 rounded-full"></div> <!-- Smaller line for sub-section -->
                        <div>
                            <h2 class="text-3xl font-bold text-gray-700">Berdasarkan Jenis Kelamin</h2>
                        </div>
                    </div>
                    <div id="pendidikan-chart-container" class="flex justify-center items-center w-full min-h-[300px] sm:min-h-[400px] bg-white p-4 rounded-lg shadow-md border border-gray-100 relative z-10">
                    </div>
                </div>
            </div> 
        </div>

        <div class="container mx-auto px-4 py-8 md:px-8 md:py-12 bg-white rounded-lg shadow-xl my-8">
            <div class="flex items-center mb-4">
                <div class="w-1.5 bg-[#2874A6] h-14 mr-4 rounded-full"></div>
                <div>
                    <h1 class="text-4xl font-bold text-gray-800 section-title-underline">Sarana dan Prasarana</h1>
                </div>
            </div>

            <div class="mb-8 flexible-grid">
                <div class="bg-gray-100 p-5 rounded-xl shadow-lg border border-gray-200 flex items-center card-hover-effect cursor-pointer" onclick="showCarouselDetail('Kantor Desa', '', [{url: 'images/kantordesa.JPG', name: 'Gedung Kantor Desa', address: 'Dusun Tulekko'}])">
                    <i class="fas fa-building text-4xl text-[#2874A6] mr-4"></i>
                    <div class="flex-grow-0">
                        <p class="text-gray-600">KANTOR DESA</p>
                        <p class="text-2xl font-bold text-[#2874A6]">1 UNIT</p>
                    </div>
                    <button class="ml-auto bg-[#2874A6] text-white px-3 py-1 rounded-md hover:bg-[#1A5276] transition-colors duration-200 text-sm font-semibold">Detail</button>
                </div>
            </div>

            <h2 class="text-2xl font-bold text-gray-800 mt-8 mb-4">Sarana Kesehatan</h2>
            <div class="flexible-grid mb-8">
                <div class="bg-gray-100 p-5 rounded-xl shadow-lg border border-gray-200 flex items-center card-hover-effect cursor-pointer" onclick="showCarouselDetail('POSKESDES', '', [{url:'images/poskesdes.JPG', name: 'Poskesdes Kita', address: 'Dusun Tulekko'}])">
                    <i class="fas fa-hospital text-4xl text-[#2874A6] mr-4"></i>
                    <div class="flex-grow-0">
                        <p class="text-gray-600">POSKESDES</p>
                        <p class="text-2xl font-bold text-[#2874A6]">1 UNIT</p>
                    </div>
                    <button class="ml-auto bg-[#2874A6] text-white px-3 py-1 rounded-md hover:bg-[#1A5276] transition-colors duration-200 text-sm font-semibold">Detail</button>
                </div>
                <div class="bg-gray-100 p-5 rounded-xl shadow-lg border border-gray-200 flex items-center card-hover-effect cursor-pointer" onclick="showCarouselDetail('POSYANDU', '', [
                    {url: 'images/mawar_indah.JPG', name: 'Posyandu Mawar Indah 1', address: 'Dusun Tulekko'},
                    {url: 'images/mawar_indah2.JPG', name: 'Posyandu Mawar Indah 2', address: 'Dusun Tunumbeng'},
                    {url: 'images/mawar_indah3.JPG', name: 'Posyandu Mawar Indah 3', address: 'Dusun Samakore'}
                ])">
                    <i class="fas fa-clinic-medical text-4xl text-[#2874A6] mr-4"></i>
                    <div class="flex-grow-0">
                        <p class="text-gray-600">POSYANDU</p>
                        <p class="text-2xl font-bold text-[#2874A6]">3 UNIT</p>
                    </div>
                    <button class="ml-auto bg-[#2874A6] text-white px-3 py-1 rounded-md hover:bg-[#1A5276] transition-colors duration-200 text-sm font-semibold">Detail</button>
                </div>
            </div>

            <h2 class="text-2xl font-bold text-gray-800 mt-8 mb-4">Prasarana Pendidikan</h2>
            <div class="flexible-grid mb-8">
                <div class="bg-gray-100 p-5 rounded-xl shadow-lg border border-gray-200 flex items-center card-hover-effect cursor-pointer" onclick="showCarouselDetail('TK', '', [
                    {url: 'images/tk_nurul_falah.JPG', name: 'TK Nurul Falah', address: 'Dusun Tulekko'},
                    {url: 'images/masjid_jannatulmawa2.JPG', name: 'TPA Jannatul Ma wa', address: 'Dusun Tunumbeng'},
                    {url: 'images/masjid_baburidha2.JPG', name: 'TPA Baburidha', address: 'Dusun Tunumbeng'}
                ])">
                    <i class="fas fa-school text-4xl text-[#2874A6] mr-4"></i>
                    <div class="flex-grow-0">
                        <p class="text-gray-600">PAUD / TK / TPA</p>
                        <p class="text-2xl font-bold text-[#2874A6]">3 UNIT</p>
                    </div>
                    <button class="ml-auto bg-[#2874A6] text-white px-3 py-1 rounded-md hover:bg-[#1A5276] transition-colors duration-200 text-sm font-semibold">Detail</button>
                </div>
                <div class="bg-gray-100 p-5 rounded-xl shadow-lg border border-gray-200 flex items-center card-hover-effect cursor-pointer" onclick="showCarouselDetail('SD', '', [
                    {url: 'images/sdn345.JPG', name: 'SD Negeri 345 Bontomarannu', address: 'Dusun Samakore'},
                    {url: 'images/sdn178.JPG', name: 'SD Negeri 178 Bontomarannu', address: 'Dusun Tulekko'},
                ])">
                    <i class="fas fa-book-reader text-4xl text-[#2874A6] mr-4"></i>
                    <div class="flex-grow-0">
                        <p class="text-gray-600">SD</p>
                        <p class="text-2xl font-bold text-[#2874A6]">2 UNIT</p>
                    </div>
                    <button class="ml-auto bg-[#2874A6] text-white px-3 py-1 rounded-md hover:bg-[#1A5276] transition-colors duration-200 text-sm font-semibold">Detail</button>
                </div>
            </div>

            <h2 class="text-2xl font-bold text-gray-800 mt-8 mb-4">Prasarana Ibadah</h2>
            <div class="flexible-grid mb-8">
                <div class="bg-gray-100 p-5 rounded-xl shadow-lg border border-gray-200 flex items-center card-hover-effect cursor-pointer" onclick="showCarouselDetail('Masjid', '', [
                    {url: 'images/masjid_nurul_huda.JPG', name: 'Masjid Nurul Huda', address: 'Dusun Samakore'},
                    {url: 'images/masjid_nuruliman_samakore.JPG', name: 'Masjid Nurul Iman', address: 'Dusun Samakore'},
                    {url: 'images/masjid_babul_rahman.JPG', name: 'Masjid Babul Rahman', address: 'Dusun Tulekko'},
                    {url: 'images/masjid_jannatulmawa.JPG', name: 'Masjid Jannatul Ma wa', address: 'Dusun Tunumbeng'},
                    {url: 'images/masjid_babulsalam.JPG', name: 'Masjid Babul Salam', address: 'Dusun Tunumbeng'},
                    {url: 'images/masjid_baburidha.JPG', name: 'Masjid Baburidha', address: 'Dusun Tunumbeng'},
                    {url: 'images/masjid_alikhlas.JPG', name: 'Masjid Al-Ikhlas', address: 'Dusun Tunumbeng'}
                ])">
                    <i class="fas fa-mosque text-4xl text-[#2874A6] mr-4"></i>
                    <div class="flex-grow-0">
                        <p class="text-gray-600">MASJID</p>
                        <p class="text-2xl font-bold text-[#2874A6]">7 UNIT</p>
                    </div>
                    <button class="ml-auto bg-[#2874A6] text-white px-3 py-1 rounded-md hover:bg-[#1A5276] transition-colors duration-200 text-sm font-semibold">Detail</button>
                </div>
            </div>
            <h2 class="text-2xl font-bold text-gray-800 mt-8 mb-4">Prasarana Umum</h2>
            <div class="flexible-grid mb-8">
                <div class="bg-gray-100 p-5 rounded-xl shadow-lg border border-gray-200 flex items-center card-hover-effect cursor-pointer" onclick="showCarouselDetail('Sumur Desa', '', [
                    {url: 'images/sungai.JPG', name: 'Sungai', address: 'Dusun Samakore'},
                    {url: 'images/sungai2.JPG', name: 'Sungai', address: 'Dusun Tunumbeng'}
                ])">
                    <i class="fas fa-water text-4xl text-[#2874A6] mr-4"></i> 
                    <div class="flex-grow-0">
                        <p class="text-gray-600">SUNGAI DESA</p>
                        <p class="text-2xl font-bold text-[#2874A6]">2 ALIRAN</p>
                    </div>
                    <button class="ml-auto bg-[#2874A6] text-white px-3 py-1 rounded-md hover:bg-[#1A5276] transition-colors duration-200 text-sm font-semibold">Detail</button>
                </div>
                <div class="bg-gray-100 p-5 rounded-xl shadow-lg border border-gray-200 flex items-center card-hover-effect cursor-pointer" onclick="showCarouselDetail('Lapangan Hari Raya / Sepak Bola', '', [
                    {url: 'images/lapangan.JPG', name: 'LAPANGAN HARI RAYA / SEPAK BOLA', address: 'Dusun Tulekko'}
                ])">
                    <i class="fas fa-map-location-dot text-4xl text-[#2874A6] mr-4"></i> <!-- Icon for Volly -->
                    <div class="flex-grow-0">
                        <p class="text-gray-600">LAPANGAN HARI RAYA / SEPAK BOLA</p>
                        <p class="text-2xl font-bold text-[#2874A6]">1 LOKASI</p>
                    </div>
                    <button class="ml-auto bg-[#2874A6] text-white px-3 py-1 rounded-md hover:bg-[#1A5276] transition-colors duration-200 text-sm font-semibold">Detail</button>
                </div>
            </div>

            <h2 class="text-2xl font-bold text-gray-800 mt-8 mb-4">Prasarana Transportasi</h2>
            <div class="flexible-grid mb-8">
                <div class="bg-gray-100 p-5 rounded-xl shadow-lg border border-gray-200 flex items-center card-hover-effect cursor-pointer" onclick="openCategoryListModal('Jalan Desa', '', [
                    {name: 'Jalan Provinsi', value: '4 KM'},
                    {name: 'Jalan Kabupaten', value: '4 KM'},
                    {name: 'Jalan Kecamatan', value: '5 KM'}
                ], false)">
                    <i class="fas fa-route text-4xl text-[#2874A6] mr-4"></i>
                    <div class="flex-grow-0">
                        <p class="text-gray-600">JALAN DESA</p>
                        <p class="text-2xl font-bold text-[#2874A6]">Lihat Detail</p>
                    </div>
                    <button class="ml-auto bg-[#2874A6] text-white px-3 py-1 rounded-md hover:bg-[#1A5276] transition-colors duration-200 text-sm font-semibold">Detail</button>
                </div>
                <div class="bg-gray-100 p-5 rounded-xl shadow-lg border border-gray-200 flex items-center card-hover-effect cursor-pointer" onclick="openCategoryListModal('Kualitas Jalan', 'images/jalan.JPG', [
                    {name: 'Aspal', value: '11 KM'},
                    {name: 'Rabat Benton', value: '3.175M'},
                    {name: 'Sirtu', value: '1 KM'},
                    {name: 'Tanah', value: '2 KM'}
                ], false)">
                    <i class="fas fa-road text-4xl text-[#2874A6] mr-4"></i>
                    <div class="flex-grow-0">
                        <p class="text-gray-600">KUALITAS JALAN</p>
                        <p class="text-2xl font-bold text-[#2874A6]">4 JENIS</p>
                    </div>
                    <button class="ml-auto bg-[#2874A6] text-white px-3 py-1 rounded-md hover:bg-[#1A5276] transition-colors duration-200 text-sm font-semibold">Detail</button>
                </div>
                <div class="bg-gray-100 p-5 rounded-xl shadow-lg border border-gray-200 flex items-center card-hover-effect cursor-pointer" onclick="showCarouselDetail('Jembatan Besi', '', [
                    {url: 'images/jembatan.JPG', name: 'Jembatan Perbatasan Desa Bontomarannu dan Desa Manyampa', address: 'Dusun Samakore'},
                    {url: 'images/jembatan2.JPG', name: 'Jembatan Dusun Tunumbeng', address: 'Dusun Tunumbeng'}
                ])">
                    <i class="fas fa-archway text-4xl text-[#2874A6] mr-4"></i> 
                    <div class="flex-grow-0">
                        <p class="text-gray-600">JEMBATAN</p>
                        <p class="text-2xl font-bold text-[#2874A6]">2 JEMBATAN</p>
                    </div>
                    <button class="ml-auto bg-[#2874A6] text-white px-3 py-1 rounded-md hover:bg-[#1A5276] transition-colors duration-200 text-sm font-semibold">Detail</button>
                </div>
            </div>

            <h2 class="text-2xl font-bold text-gray-800 mt-8 mb-4">Prasarana Air Bersih</h2>
            <div class="flexible-grid mb-8">
                <div class="bg-gray-100 p-5 rounded-xl shadow-lg border border-gray-200 flex items-center card-hover-effect cursor-pointer" onclick="showCarouselDetail('Sumur Bor', '', [
                    {url: 'images/sumur_bor1.JPG', name: 'Sumur Bor', address: 'Di Berbagai Lokasi'}
                ])">
                    <i class="fas fa-hand-holding-water text-4xl text-[#2874A6] mr-4"></i>
                    <div class="flex-grow-0">
                        <p class="text-gray-600">SUMUR BOR</p>
                        <p class="text-2xl font-bold text-[#2874A6]">DI BERBAGAI LOKASI</p>
                    </div>
                    <button class="ml-auto bg-[#2874A6] text-white px-3 py-1 rounded-md hover:bg-[#1A5276] transition-colors duration-200 text-sm font-semibold">Detail</button>
                </div>
            </div>

            <h2 class="text-2xl font-bold text-gray-800 mt-8 mb-4">Prasarana Sanitasi dan Irigasi</h2>
            <div class="flexible-grid mb-8">
                <div class="bg-gray-100 p-5 rounded-xl shadow-lg border border-gray-200 flex items-center card-hover-effect cursor-pointer" onclick="showCarouselDetail('MCK Umum', '1 BUAH', [
                    {url: 'images/mck_umum.JPG', name: 'MCK Umum Lapangan', address: 'Dusun Tulekko'}
                ])">
                    <i class="fas fa-toilet text-4xl text-[#2874A6] mr-4"></i>
                    <div class="flex-grow-0">
                        <p class="text-gray-600">MCK UMUM</p>
                        <p class="text-2xl font-bold text-[#2874A6]">1 UNIT</p>
                    </div>
                    <button class="ml-auto bg-[#2874A6] text-white px-3 py-1 rounded-md hover:bg-[#1A5276] transition-colors duration-200 text-sm font-semibold">Detail</button>
                </div>
                <div class="bg-gray-100 p-5 rounded-xl shadow-lg border border-gray-200 flex items-center card-hover-effect cursor-pointer" onclick="showCarouselDetail('Saluran Irigasi', '', [
                    {url: 'images/irigasi.JPG', name: 'Saluran Sawah', address: 'Dusun Tunumbeng'},
                    {url: 'images/irigasi2.JPG', name: 'Saluran Sawah', address: 'Dusun Tunumbeng'}
                ])">
                    <i class="fas fa-water text-4xl text-[#2874A6] mr-4"></i>
                    <div class="flex-grow-0">
                        <p class="text-gray-600">SALURAN IRIGASI</p>
                        <p class="text-2xl font-bold text-[#2874A6]">SAWAH</p>
                    </div>
                    <button class="ml-auto bg-[#2874A6] text-white px-3 py-1 rounded-md hover:bg-[#1A5276] transition-colors duration-200 text-sm font-semibold">Detail</button>
                </div>
            </div>
        </div>

        <div class="container mx-auto px-4 py-8 md:px-8 md:py-12 bg-white rounded-lg shadow-xl my-8">
            <div class="flex items-center mb-4">
                <div class="w-1.5 bg-[#2874A6] h-14 mr-4 rounded-full"></div>
                <div>
                    <h1 class="text-4xl font-bold text-gray-800 section-title-underline">Infografis</h1>
                    <h2 class="text-2xl text-gray-500 mt-2">APBDes Bontomarannu</h2>
                </div>
            </div>

            <div class="text-center bg-gray-100 p-6 rounded-lg shadow-md mb-8">
                <h1 class="text-3xl font-bold text-gray-800">INFOGRAFIS</h1>
                <h2 class="text-2xl font-bold text-[#1A5276]">ANGGARAN PENDAPATAN DAN BELANJA DESA (APBDes)</h2>
                <h2 class="text-2xl font-bold text-[#1A5276]">DESA Bontomarannu T.A. 2024</h2>
                <h3 class="text-xl font-bold text-gray-700">KECAMATAN BONTOTIRO</h3>
                <h3 class="text-xl font-bold text-gray-700">KABUPATEN BULUKUMBA</h3>
            </div>

            <div class="mt-4">
                <h4 class="text-lg font-bold text-gray-800 mb-2">DANA TRANSFER DESA TAHUN ANGGARAN 2024</h4>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 bg-gray-100 p-4 rounded-lg shadow-md">
                    <div class="text-center">
                        <p class="text-[#2874A6] font-bold text-xl">Rp1.608.524.514</p>
                        <p class="text-gray-700">PENDAPATAN</p>
                    </div>
                    <div class="text-center">
                        <p class="text-green-600 font-bold text-xl">Rp20.000.000</p>
                        <p class="text-gray-700">PENDAPATAN ASLI DESA</p>
                    </div>
                    <div class="text-center">
                        <p class="text-[#806B6C] font-bold text-xl">Rp799.953.000</p>
                        <p class="text-gray-700">DANA DESA</p>
                    </div>
                    <div class="text-center">
                        <p class="text-yellow-600 font-bold text-xl">Rp42.179.062</p>
                        <p class="text-gray-700">ALOKASI DANA DESA DAN RETRIBUSI DAERAH KABUPATEN/KOTA</p>
                    </div>
                    <div class="text-center">
                        <p class="text-red-600 font-bold text-xl">Rp745.192.452</p>
                        <p class="text-gray-700">ALOKASI DANA DESA</p>
                    </div>
                    <div class="text-center">
                        <p class="text-[#374151] font-bold text-xl">Rp1.200.000</p>
                        <p class="text-gray-700">BUNGA BANK</p>
                    </div>
                </div>
            </div>

            <div class="mt-8">
                <h4 class="text-lg font-bold text-gray-800 mb-2">Rincian Belanja Desa</h4>
                <div class="overflow-x-auto">
                    <table class="min-w-full bg-gray-100 border border-gray-300 rounded-lg shadow-md">
                        <thead>
                            <tr class="bg-gray-200">
                                <th class="py-3 px-4 border-b-2 border-gray-300 text-left text-gray-700">Bidang</th>
                                <th class="py-3 px-4 border-b-2 border-gray-300 text-left text-gray-700">Kegiatan</th>
                                <th class="py-3 px-4 border-b-2 border-gray-300 text-right text-gray-700">Anggaran (Rp)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- BIDANG PENYELENGGARAAN PEMERINTAHAN DESA -->
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-800 font-medium" rowspan="23">BIDANG PENYELENGGARAAN PEMERINTAHAN DESA - Rp.734.662.710</td>
                                <td colspan="2" class="py-2 px-4 border-b border-gray-300 text-gray-700 font-semibold pl-4">1.1 Penyelenggaran Belanja Siltap, Tunjangan dan Operasional Pemerintahan Desa (Maksimal 30% untuk Kegiatan)</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">1.1.01 Penyediaan Penghasilan Tetap dan Tunjangan Kepala Desa</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">41.287.842 ADD, PAD</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">1.1.02 Penyediaan Penghasilan Tetap dan Tunjangan Perangkat Desa</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">274.744.000 ADD PAD</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">1.1.03 Penyediaan Jaminan Sosial bagi Kepala Desa dan Perangkat Desa</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">11.918.208 ADD</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">1.1.04 Operasional Pemerintah Desa (ATK, Honor PKPKD dan PPK D, Perlengkapan Perkantoran, pakaian)</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">128.609.750 ADD PBH</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">1.1.05 Penyediaan Tunjangan BPD</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">109.200.000 ADD</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">1.1.06 Operasional BPD (rapat, ATK, Makan Minum, Perlengkapan Perkantoran, Pakaian Seragam)</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">19.640.000 ADD</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">1.1.07 Penyediaan Insentif/Operasional RT/RW</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">28.800.000 ADD</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">1.1.08 Penyediaan Operasional Pemerintah Desa yang Bersumber dari Dana Desa</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">23.998.000 DDS</td>
                            </tr>
                            <tr>
                                <td colspan="2" class="py-2 px-4 border-b border-gray-300 text-gray-700 font-semibold pl-4">1.2 Penyediaan Sarana Prasarana Pemerintahan Desa</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">1.2.01 Penyediaan Sarana (Aset Tetap) Perkantoran/Pemerintahan</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">14.100.000 ADD</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">1.2.02 Pemeliharaan Gedung/Prasarana Kantor Desa</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">2.500.000 PBH</td>
                            </tr>
                            <tr>
                                <td colspan="2" class="py-2 px-4 border-b border-gray-300 text-gray-700 font-semibold pl-4">1.3 Administrasi Kependudukan, Pencatatan Sipil, Statistik dan Kearsipan</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">1.3.01 Pelayanan Adminitrasi Umum dan Kependudukan</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">3.600.000 ADD</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">1.3.02 Penyusunan/Pendataan/Pemutakhiran Profil Desa (Dipilih)</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">16.268.000 ADD, DDS</td>
                            </tr>
                            <tr>
                                <td colspan="2" class="py-2 px-4 border-b border-gray-300 text-gray-700 font-semibold pl-4">1.4 Tata Praja Pemerintahan, Perencanaan, Keuangan dan Pelaporan</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">1.4.01 Penyelenggaraan Musyawarah Perencanaan Desa/Pembahasan APBDes (Reguler)</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">9.990.000 ADD, PAD</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">1.4.03 Penyusunan Dokumen Perencanaan Desa (RPJMDesa/RKPDesa dII)</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">11.358.500 ADD</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">1.4.04 Penyusunan Dokumen Keuangan Desa (APBDes, APBDes Perubahan, LP J dll)</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">10.009.500 ADD, PBH</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">1.4.10 Dukungan dan Sosialisasi Pelaksanaan Pilkades, Pemilihan Ka. Kewilayahan dan BPD</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">4.312.250 ADD</td>
                            </tr>
                            <tr>
                                <td colspan="2" class="py-2 px-4 border-b border-gray-300 text-gray-700 font-semibold pl-4">1.5 Sub Bidang Pertanahan</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">1.5.06 Adminstrasi Pajak Bumi dan Bangunan (PBB)</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">4.326.062 PBH</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">1.5.07 Penentuan/Penegasan Batas/Patok Tanah Kas Desa</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">20.000.000 ADD</td>
                            </tr>

                            <!-- BIDANG PELAKSANAAN PEMBANGUNAN DESA -->
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-800 font-medium" rowspan="20">BIDANG PELAKSANAAN PEMBANGUNAN DESA - Rp.513.679.800</td>
                                <td colspan="2" class="py-2 px-4 border-b border-gray-300 text-gray-700 font-semibold pl-4">2.1 Sub Bidang Pendidikan</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">2.1.01 Penyelenggaran PAUD/TK/TPA/TKA/TPQ/Madrasah NonFormal Milik Desa (Honor, Pakaian, dll)</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">15.000.000 DSS</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">2.1.10 Dukungan Pendidikan bagi Siswa Miskin/Berprestasi</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">8.000.000 DSS</td>
                            </tr>
                            <tr>
                                <td colspan="2" class="py-2 px-4 border-b border-gray-300 text-gray-700 font-semibold pl-4">2.2 Sub Bidang Kesehatan</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">2.2.01 Penyelenggaraan Pos Kesehatan Desa/Polindes Milik Desa (obat, Insentif, KB, dsb)</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">18.000.000 DSS</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">2.2.02 Penyelenggaraan Posyandu (Mkn Tambahan, Kls Bumil, Lansia, Insentif)</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">81.520.000 DSS</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">2.2.03 Penyuluhan dan Pelatihan Bidang Kesehatan (Untuk Masy, Tenaga dan Kader Kesehatan dll)</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">5.190.000 DSS</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">2.2.04 Penyelenggaraan Desa Siaga Kesehatan</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">21.100.000 DSS</td>
                            </tr>
                            <tr>
                                <td colspan="2" class="py-2 px-4 border-b border-gray-300 text-gray-700 font-semibold pl-4">2.3 Sub Bidang Pekerjaan Umum dan Penataan Ruang</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">2.3.05 Pemeliharaan Prasarana Jalan Desa (Gorong-Gorong/Selokan/Parit/Drainase dll)</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">38.062.000 DSS</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">2.3.11 Pembangunan/Rehabilitasi/Peningkatan/Pengerasan Jalan Lingkungan Pemukiman **}</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">144.981.000 DSS</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">Pembangunan/Rehabilitas/Peningkatan/Pengerasan Jalan Usaha Tani **}</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">93.040.000 DSS</td>
                            </tr>
                            <tr>
                                <td colspan="2" class="py-2 px-4 border-b border-gray-300 text-gray-700 font-semibold pl-4">2.4 Sub Bidang Kawasan Permukiman</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">2.4.01 Dukungan Pelaksanaan Program Pembangunan/Rehab Rumah Tidak Layak Huni GAKIN</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">10.000.000 DDS</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">2.4.11 Pembangunan/Rehabilitasi/Peningkatan Sumber Air Bersih Milik Desa **}</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">57.225.000 DDS</td>
                            </tr>
                            <tr>
                                <td colspan="2" class="py-2 px-4 border-b border-gray-300 text-gray-700 font-semibold pl-4">2.5 Sub Bidang Kehutanan dan Lingkungan Hidup</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">2.5.03 Pelatihan/Sosialisasi/Penyuluhan/Penyadaran tentang LH dan Kehutanan</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">5.225.000 DDS</td>
                            </tr>
                            <tr>
                                <td colspan="2" class="py-2 px-4 border-b border-gray-300 text-gray-700 font-semibold pl-4">2.6 Sub Bidang Perhubungan, Komunikasi dan Informatika</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">2.6.02 Penyelenggaraan Informasi Publik Desa (Poster, Baliho dll)</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">1.200.000 DDS</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">2.6.03 Pengelolaan dan Pembuatan Jaringan/Instalasi Komunikasi dan Informasi Lokal Desa</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">14.455.800 DDS</td>
                            </tr>

                            <!-- BIDANG PEMBINAAN KEMASYARAKATAN -->
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-800 font-medium" rowspan="8">BIDANG PEMBINAAN KEMASYARAKATAN Rp.88.045.404</td>
                                <td colspan="2" class="py-2 px-4 border-b border-gray-300 text-gray-700 font-semibold pl-4">3.2 Sub Bidang Kebudayaan dan Keagamaan</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">3.2.99 Lain-lain Kegiatan Sub Bidang Kebudayaan dan Keagamaan</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">21.000.000 ADD</td>
                            </tr>
                            <tr>
                                <td colspan="2" class="py-2 px-4 border-b border-gray-300 text-gray-700 font-semibold pl-4">3.3 Sub Bidang Kepemudaan dan Olahraga</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">3.3.01 Pengiriman Kontingen Kepemudaan & Olahraga Sebagai Wakil Desa tkt Kec/Kab/Kota</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">6.340.000 PBH</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">3.3.03 Penyelenggaraan Festival/Lomba Kepemudaan dan Olahraga Tingkat Desa</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">4.467.500 PBH</td>
                            </tr>
                            <tr>
                                <td colspan="2" class="py-2 px-4 border-b border-gray-300 text-gray-700 font-semibold pl-4">3.4 Sub Bidang Kelembagaan Masyarakat</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">3.4.02 Pembinaan LKMD/LPM/LPMD</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">8.400.000 ADD</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">3.4.03 Pembinaan PKK</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">47.837.904 ADD</td>
                            </tr>

                            <!-- BIDANG PENANGGULANGAN BENCANA, DARURAT DAN MENDESAK -->
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-800 font-medium" rowspan="6">BIDANG PEMBERDAYAAN MASYARAKAT - Rp180.120.600</td>
                                <td colspan="2" class="py-2 px-4 border-b border-gray-300 text-gray-700 font-semibold pl-4">4.2 Sub Bidang Pertanian dan Peternakan</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">4.2.03 Penguatan Ketahanan Pangan Tingkat Desa (Lumbung Desa dil) (kesiapan menghadapi bencana)</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">159.990.600</td>
                            </tr>
                            <tr>
                                <td colspan="2" class="py-2 px-4 border-b border-gray-300 text-gray-700 font-semibold pl-4">4.3 Sub Bidang Peningkatan Kapasitas Aparatur Desa</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">4.3.01 Peningkatan Kapasitas Kepala Desa</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">3.280.000</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">4.3.02 Peningkatan Kapatitas Perangkat Desa</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">10.390.000</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">4.3.03 Peningkatan Kapasitas BPD</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">6.460.000</td>
                            </tr>

                            <!-- BIDANG PENDUKUNG -->
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-800 font-medium" rowspan="6">BIDANG PENANGGULANGAN BENCANA, DARURAT, DAN MENDESAK DESA - Rp90.000.000</td>
                                <td colspan="2" class="py-2 px-4 border-b border-gray-300 text-gray-700 font-semibold pl-4">5.1 Sub Bidang Penanggulangan Bencana</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">5.1.00 Penanggulanan Bencana</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">00.000.000</td>
                            </tr>
                            <tr>
                                <td colspan="2" class="py-2 px-4 border-b border-gray-300 text-gray-700 font-semibold pl-4">5.2 Sub Bidang Keadaan Darurat</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">5.2.00 Penanganan Keadaan Darurat</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">00.000.000</td>
                            </tr>
                            <tr>
                                <td colspan="2" class="py-2 px-4 border-b border-gray-300 text-gray-700 font-semibold pl-4">5.3 Sub Bidang Keadaan Mendesak</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b border-gray-300 text-gray-700 pl-8">5.3.00 Penanganan Keadaan Mendesak</td>
                                <td class="py-2 px-4 border-b border-gray-300 text-right text-gray-800">90.000.000 DDS</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer Section -->
    <footer class="bg-[#1F2937] text-white px-4 py-8 md:px-8 md:py-10 mt-12 shadow-inner">
        <div class="container mx-auto">
            <div class="flex flex-col items-center pb-6 border-b border-gray-700 mb-6">
                <div class="text-center">
                    <h1 class="text-xl md:text-2xl text-white font-bold">Desa Bontomarannu</h1>
                    <p class="text-sm text-gray-300 mt-1">Kec. Bontotiro, Kab. Bulukumba, Sulawesi Selatan</p>
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-8 text-justify">
                <div class="space-y-3">
                    <h2 class="text-lg text-white font-bold flex items-center"><i class="fas fa-globe mr-2 text-[#3498DB]"></i>Website Profil Desa</h2>
                    <p class="text-sm text-gray-300 leading-relaxed">
                        Website profil Desa merupakan situs web yang memuat informasi dasar mengenai desa, sejarah, visi dan misi desa, sampai dengan peta wilayah desa.
                    </p>
                </div>
                <div class="space-y-3">
                    <h2 class="text-lg text-white font-bold flex items-center"><i class="fas fa-code mr-2 text-[#3498DB]"></i>Developer</h2>
                    <p class="text-sm text-gray-300 leading-relaxed">
                        Website ini dibuat oleh Khalizatul Jannah, Mahasiswa KKN Universitas Hasanuddin Gelombang 114 Desa Bontomarannu pada Juli-Agustus 2025.
                    </p>
                </div>
                <div class="space-y-3">
                    <h2 class="text-lg text-white font-bold flex items-center"><i class="fas fa-bullseye mr-2 text-[#3498DB]"></i>Harapan &amp; Tujuan</h2>
                    <p class="text-sm text-gray-300 leading-relaxed">
                        Situs web profil ini dibuat untuk tujuan promosi dan publisitas Desa Bontomarannu agar lebih dikenal oleh khalayak ramai baik di dalam maupun di luar Desa Bontomarannu.
                    </p>
                </div>
            </div>
            <div class="text-center mt-10 border-t border-gray-700 pt-6">
                <p class="text-xs text-gray-400">
                    © 2025 Desa Bontomarannu - All rights reserved
                </p>
            </div>
        </div>
    </footer>

    <!-- Detail Modal Structure -->
    <div id="detailModal" class="fixed inset-0 bg-black bg-opacity-60 z-[9999] hidden flex items-center justify-center p-4">
        <div class="bg-white p-8 rounded-xl shadow-2xl max-w-2xl w-full relative my-8 max-h-[90vh] overflow-y-auto modal-content">
            <button class="close-detail-modal absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-4xl font-light leading-none transition-colors duration-200">&times;</button>
            <h2 id="detailModalTitle" class="text-2xl font-bold text-gray-800 mb-4 text-center"></h2>
            <div id="carouselContainer" class="relative w-full mb-4 overflow-hidden rounded-lg shadow-md">
                <!-- Images or list items will be dynamically loaded here -->
            </div>
            <div class="flex justify-center items-center mt-2">
                <p id="imageCounter" class="text-gray-600 text-sm"></p>
            </div>
            <p id="detailImageName" class="text-center text-lg font-semibold text-gray-700 mt-2"></p>
            <p id="detailModalValue" class="text-center text-xl font-semibold text-[#2874A6] mt-1"></p>
            <p id="detailModalAddress" class="text-center text-sm text-gray-500 mt-2"></p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- Navigation Link Active State ---
            const navLinks = document.querySelectorAll('.nav-link');
            const currentPath = window.location.pathname.split('/').pop();

            navLinks.forEach(link => {
                // Set active class on page load
                if (link.getAttribute('href') === currentPath || (currentPath === '' && link.getAttribute('href') === 'index.html')) {
                    link.classList.add('active');
                }

                // Add click listener for active class
                link.addEventListener('click', function() {
                    navLinks.forEach(l => l.classList.remove('active')); // Remove active from all
                    this.classList.add('active'); // Add active to clicked link
                });
            });

            // --- Hamburger Menu Toggle ---
            const hamburger = document.getElementById('hamburger');
            const navMenu = document.getElementById('nav-menu');

            hamburger.addEventListener('click', function() {
                navMenu.classList.toggle('active');
            });

            // Close menu when clicking outside
            document.addEventListener('click', function(event) {
                if (!hamburger.contains(event.target) && !navMenu.contains(event.target) && navMenu.classList.contains('active')) {
                    navMenu.classList.remove('active');
                }
            });

            // --- Header Scroll Effect ---
            const mainHeader = document.getElementById('main-header');
            window.addEventListener('scroll', function() {
                if (window.scrollY > 80) { // Adjust scroll threshold as needed
                    mainHeader.classList.add('header-scrolled');
                } else {
                    mainHeader.classList.remove('header-scrolled');
                }
            });

            // Create a tooltip div that is hidden by default (Global Tooltip)
            const tooltip = d3.select("body").append("div")
                .attr("class", "tooltip")
                .style("opacity", 0);

            // --- D3.js Chart for Pekerjaan ---
            function createPekerjaanChart() {
                const data = [
                    { label: "Petani", value: 204 },
                    { label: "PNS", value: 17 },
                    { label: "Wiraswasta / Pedagang", value: 189 },
                ];

                const total = data.reduce((sum, d) => sum + d.value, 0);

                const container = d3.select("#pekerjaan-chart-container");
                container.html(""); // Clear previous chart if any

                const width = container.node().getBoundingClientRect().width;
                // Make height responsive, cap at 400px but shrink if width is smaller
                const height = Math.min(width * 0.8, 400); 
                const radius = Math.min(width, height) / 2 - 40; // Adjusted radius

                const svg = container.append("svg")
                    .attr("width", width)
                    .attr("height", height)
                    .append("g")
                    .attr("transform", `translate(${width / 2}, ${height / 2})`);

                const color = d3.scaleOrdinal()
                    .domain(data.map(d => d.label))
                    .range(["#28A745", "#a78c57", "#ADD8E6"]); // Green, Brownish, Light Blue

                const pie = d3.pie()
                    .sort(null)
                    .value(d => d.value);

                const arc = d3.arc()
                    .innerRadius(0)
                    .outerRadius(radius);

                const arcs = svg.selectAll(".arc")
                    .data(pie(data))
                    .enter()
                    .append("g")
                    .attr("class", "arc");

                arcs.append("path")
                    .attr("d", arc)
                    .attr("fill", d => color(d.data.label))
                    .attr("stroke", "white")
                    .style("stroke-width", "2px")
                    .style("opacity", 0.8)
                    .on("mouseover", function(event, d) {
                        d3.select(this).transition() // Add transition for scaling
                            .duration(200)
                            .attr("transform", `scale(1.05)`); // Scale up on hover
                        tooltip.transition()
                            .duration(200)
                            .style("opacity", .9);
                        tooltip.html(`<strong>${d.data.label}:</strong> ${d.data.value} (${((d.data.value / total) * 100).toFixed(1)}%)`)
                            .style("left", (event.pageX + 10) + "px")
                            .style("top", (event.pageY - 28) + "px");
                    })
                    .on("mouseout", function() {
                        d3.select(this).transition() // Add transition for scaling back
                            .duration(200)
                            .attr("transform", "scale(1)"); // Scale back on mouse out
                        tooltip.transition()
                            .duration(500)
                            .style("opacity", 0);
                    });

                // Add text labels
                arcs.append("text")
                    .attr("transform", d => `translate(${arc.centroid(d)})`)
                    .attr("dy", "0.35em")
                    .text(d => `${((d.data.value / total) * 100).toFixed(1)}%`)
                    .style("font-size", "12px")
                    .style("text-anchor", "middle")
                    .style("fill", "white")
                    .style("pointer-events", "none"); // Make text not interfere with mouse events

                // Add legend (using custom legend-item classes)
                const legendContainer = d3.select("#pekerjaan-chart-container").append("div")
                    .attr("class", "absolute top-4 right-4 p-2 bg-white bg-opacity-90 rounded-lg shadow-sm");

                const legend = legendContainer.selectAll(".legend-item")
                    .data(data)
                    .enter().append("div")
                    .attr("class", "legend-item");

                legend.append("div")
                    .attr("class", "legend-color-box")
                    .style("background-color", d => color(d.label));

                legend.append("span")
                    .attr("class", "legend-text")
                    .text(d => d.label);

                // Add interaction to legend items
                legend.on("mouseover", function(event, d_legend) {
                    svg.selectAll(".arc path")
                        .filter(d_arc => d_arc.data.label === d_legend.label)
                        .transition()
                        .duration(200)
                        .attr("transform", `scale(1.05)`);
                })
                .on("mouseout", function(event, d_legend) {
                    svg.selectAll(".arc path")
                        .filter(d_arc => d_arc.data.label === d_legend.label)
                        .transition()
                        .duration(200)
                        .attr("transform", "scale(1)");
                });
            }

            // --- D3.js Chart for Pendidikan (Jenis Kelamin) ---
            function createPendidikanChart() {
                const data = [
                    { label: "Perempuan", value: 721 },
                    { label: "Laki-Laki", value: 562 }
                ];

                const total = data.reduce((sum, d) => sum + d.value, 0);

                const container = d3.select("#pendidikan-chart-container");
                container.html(""); // Clear previous chart if any

                const width = container.node().getBoundingClientRect().width;
                // Make height responsive, cap at 400px but shrink if width is smaller
                const height = Math.min(width * 0.8, 400); 
                const radius = Math.min(width, height) / 2 - 40; // Adjusted radius

                const svg = container.append("svg")
                    .attr("width", width)
                    .attr("height", height)
                    .append("g")
                    .attr("transform", `translate(${width / 2}, ${height / 2})`);

                const color = d3.scaleOrdinal()
                    .domain(data.map(d => d.label))
                    .range(["#FF69B4", "#3498db"]); // Custom colors for gender

                const pie = d3.pie()
                    .sort(null)
                    .value(d => d.value);

                const arc = d3.arc()
                    .innerRadius(0)
                    .outerRadius(radius);

                const arcs = svg.selectAll(".arc")
                    .data(pie(data))
                    .enter()
                    .append("g")
                    .attr("class", "arc");

                arcs.append("path")
                    .attr("d", arc)
                    .attr("fill", d => color(d.data.label))
                    .attr("stroke", "white")
                    .style("stroke-width", "2px")
                    .style("opacity", 0.8)
                    .on("mouseover", function(event, d) {
                        d3.select(this).transition() // Add transition for scaling
                            .duration(200)
                            .attr("transform", `scale(1.05)`); // Scale up on hover
                        tooltip.transition()
                            .duration(200)
                            .style("opacity", .9);
                        tooltip.html(`<strong>${d.data.label}:</strong> ${d.data.value} (${((d.data.value / total) * 100).toFixed(1)}%)`)
                            .style("left", (event.pageX + 10) + "px")
                            .style("top", (event.pageY - 28) + "px");
                    })
                    .on("mouseout", function() {
                        d3.select(this).transition() // Add transition for scaling back
                            .duration(200)
                            .attr("transform", "scale(1)"); // Scale back on mouse out
                        tooltip.transition()
                            .duration(500)
                            .style("opacity", 0);
                    });

                // Add text labels
                arcs.append("text")
                    .attr("transform", d => `translate(${arc.centroid(d)})`)
                    .attr("dy", "0.35em")
                    .text(d => `${((d.data.value / total) * 100).toFixed(1)}%`)
                    .style("font-size", "12px")
                    .style("text-anchor", "middle")
                    .style("fill", "white")
                    .style("pointer-events", "none");

                // Add legend (using custom legend-item classes)
                const legendContainer = d3.select("#pendidikan-chart-container").append("div")
                    .attr("class", "absolute top-4 right-4 p-2 bg-white bg-opacity-90 rounded-lg shadow-sm");

                const legend = legendContainer.selectAll(".legend-item")
                    .data(data)
                    .enter().append("div")
                    .attr("class", "legend-item");

                legend.append("div")
                    .attr("class", "legend-color-box")
                    .style("background-color", d => color(d.label));

                legend.append("span")
                    .attr("class", "legend-text")
                    .text(d => d.label);

                // Add interaction to legend items
                legend.on("mouseover", function(event, d_legend) {
                    svg.selectAll(".arc path")
                        .filter(d_arc => d_arc.data.label === d_legend.label)
                        .transition()
                        .duration(200)
                        .attr("transform", `scale(1.05)`);
                })
                .on("mouseout", function(event, d_legend) {
                    svg.selectAll(".arc path")
                        .filter(d_arc => d_arc.data.label === d_legend.label)
                        .transition()
                        .duration(200)
                        .attr("transform", "scale(1)");
                });
            }

            // Initial chart rendering
            createPekerjaanChart();
            createPendidikanChart();

            // Re-render charts on window resize
            window.addEventListener('resize', () => {
                createPekerjaanChart();
                createPendidikanChart();
            });

            // --- Generic Detail Modal Logic ---
            const detailModal = document.getElementById('detailModal');
            const detailModalTitle = document.getElementById('detailModalTitle');
            const detailModalValue = document.getElementById('detailModalValue');
            const detailImageName = document.getElementById('detailImageName'); // New element for image name
            const detailModalAddress = document.getElementById('detailModalAddress');
            const imageCounter = document.getElementById('imageCounter');
            const carouselContainer = document.getElementById('carouselContainer');
            const closeDetailModalBtn = detailModal.querySelector('.close-detail-modal');

            let currentImageIndex = 0;
            let modalImageData = []; // Changed to store objects with url, name, address

            // Function to display the image carousel
            window.showCarouselDetail = function(title, value, imageData) {
                detailModalTitle.textContent = title;
                detailModalValue.textContent = value;
                modalImageData = imageData;
                currentImageIndex = 0; // Reset to first image

                // Show carousel related elements
                carouselContainer.classList.remove('h-auto', 'flex-col', 'items-center', 'justify-center');
                // Removed fixed height classes, aspect ratio will now control height
                carouselContainer.classList.add('relative', 'w-full', 'mb-4', 'overflow-hidden', 'rounded-lg', 'shadow-md');
                
                imageCounter.classList.remove('hidden');
                detailImageName.classList.remove('hidden');
                detailModalValue.classList.remove('hidden');
                detailModalAddress.classList.remove('hidden');

                showImage(currentImageIndex);
                detailModal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            };

            function showImage(index) {
                carouselContainer.innerHTML = ''; // Clear previous images and overlays

                if (modalImageData.length === 0) {
                    carouselContainer.innerHTML = '<p class="text-center text-gray-500 mt-8">Tidak ada gambar tersedia.</p>';
                    imageCounter.textContent = '';
                    detailImageName.textContent = '';
                    detailModalAddress.textContent = '';
                    return;
                }

                const currentImage = modalImageData[index];

                // Create a container div for the image to enforce 16:9 aspect ratio
                const imageWrapper = document.createElement('div');
                imageWrapper.classList.add('relative', 'w-full', 'aspect-w-16-9', 'rounded-lg', 'overflow-hidden'); // Custom aspect-w-16-9 for 16:9

                // Create image element
                const img = document.createElement('img');
                img.src = currentImage.url;
                img.alt = currentImage.name || 'Detail Image ' + (index + 1);
                img.classList.add('absolute', 'inset-0', 'w-full', 'h-full', 'object-cover'); // Fill the aspect ratio container
                // Add onerror to display placeholder if image fails to load
                img.onerror = function() {
                    this.onerror = null; // Prevent infinite loop if placeholder also fails
                    this.src = `https://placehold.co/1600x900/CCCCCC/000000?text=Gambar+Tidak+Tersedia`; // Updated placeholder to 16:9
                };
                imageWrapper.appendChild(img);
                carouselContainer.appendChild(imageWrapper);


                // Update image name and address
                detailImageName.textContent = currentImage.name || '';
                detailModalAddress.textContent = currentImage.address ? `Alamat: ${currentImage.address}` : '';

                // Add navigation overlays if more than one image
                if (modalImageData.length > 1) {
                    const overlayLeft = document.createElement('div');
                    overlayLeft.classList.add('carousel-nav-overlay', 'left');
                    overlayLeft.innerHTML = '<i class="fas fa-chevron-left"></i>'; // Left chevron icon
                    overlayLeft.onclick = prevImage;
                    carouselContainer.appendChild(overlayLeft);

                    const overlayRight = document.createElement('div');
                    overlayRight.classList.add('carousel-nav-overlay', 'right');
                    overlayRight.innerHTML = '<i class="fas fa-chevron-right"></i>'; // Right chevron icon
                    overlayRight.onclick = nextImage;
                    carouselContainer.appendChild(overlayRight);
                }

                imageCounter.textContent = `${index + 1} / ${modalImageData.length}`;
            }

            window.nextImage = function() {
                currentImageIndex = (currentImageIndex + 1) % modalImageData.length;
                showImage(currentImageIndex);
            }

            window.prevImage = function() {
                currentImageIndex = (currentImageIndex - 1 + modalImageData.length) % modalImageData.length;
                showImage(currentImageIndex);
            }

            // New function to open modal with a list of categories, with or without a top image, and control sub-item clickability
            window.openCategoryListModal = function(categoryTitle, imageUrl, listItems, isSubItemClickable) {
                detailModalTitle.textContent = categoryTitle;
                detailModalValue.textContent = ''; // Clear value for list view

                // Hide carousel related elements
                imageCounter.classList.add('hidden');
                detailImageName.classList.add('hidden');
                detailModalValue.classList.add('hidden');
                detailModalAddress.classList.add('hidden');
                
                // Adjust carouselContainer for list display
                carouselContainer.classList.remove('relative', 'w-full', 'mb-4', 'overflow-hidden', 'rounded-lg', 'shadow-md');
                carouselContainer.classList.add('h-auto', 'flex-col', 'items-center', 'justify-center'); // Make it flexible for list
                carouselContainer.innerHTML = ''; // Clear previous content
                carouselContainer.style.height = 'auto'; // Ensure height adjusts for content

                // Add image if provided and not empty
                if (imageUrl && imageUrl !== '') {
                    // Create a wrapper for the image to enforce 16:9 aspect ratio
                    const imageWrapper = document.createElement('div');
                    imageWrapper.classList.add('relative', 'w-full', 'aspect-w-16-9', 'rounded-lg', 'overflow-hidden', 'mb-4'); // Added mb-4 for spacing

                    const img = document.createElement('img');
                    img.src = imageUrl;
                    img.alt = 'Category Image';
                    img.classList.add('absolute', 'inset-0', 'w-full', 'h-full', 'object-cover'); // Fill the aspect ratio container
                    img.onerror = function() {
                        this.onerror = null;
                        this.src = `https://placehold.co/1600x900/CCCCCC/000000?text=Gambar+Tidak+Tersedia`; // Updated placeholder to 16:9
                    };
                    imageWrapper.appendChild(img);
                    carouselContainer.appendChild(imageWrapper);
                }

                const listDiv = document.createElement('div');
                listDiv.classList.add('w-full', 'p-4', 'flex', 'flex-col', 'gap-2'); // Tailwind for list styling

                listItems.forEach(item => {
                    const listItemElement = document.createElement(isSubItemClickable ? 'button' : 'div');
                    listItemElement.classList.add(isSubItemClickable ? 'modal-list-item' : 'modal-list-item-static'); // Apply correct class
                    listItemElement.textContent = `${item.name} ${item.value ? '(' + item.value + ')' : ''}`; // Display value if available

                    if (isSubItemClickable) {
                        listItemElement.onclick = () => {
                            // When a list item is clicked, show its carousel detail
                            showCarouselDetail(item.name, item.value, item.imageData);
                        };
                    }
                    listDiv.appendChild(listItemElement);
                });

                carouselContainer.appendChild(listDiv);

                detailModal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            };

            // Close functionality for detailModal
            if (closeDetailModalBtn) {
                closeDetailModalBtn.addEventListener('click', function() {
                    detailModal.classList.add('hidden');
                    document.body.style.overflow = '';
                });
            }
            if (detailModal) {
                detailModal.addEventListener('click', function(e) {
                    // Only close if the click target is the modal background itself, not its children
                    if (e.target === detailModal) {
                        detailModal.classList.add('hidden');
                        document.body.style.overflow = '';
                    }
                });
            }
        });
    </script>
</body>
</html>
